# AT-3: Исправление ошибки 400 Bad Request при инициализации

## Задача

При запуске `aa init` возникала ошибка `400 Bad Request` при попытке получить список проектов из Asana API. Дополнительно обнаружена проблема с rate limiting при сканировании большого количества проектов.

## Что сделано

### 1. Исправлена ошибка 400 Bad Request

- Добавлен параметр `limit=100` в запрос к `/workspaces/{gid}/projects`
- Добавлен фильтр `archived=false` на стороне сервера
- **Файл:** `aa/core/asana_client.py`

### 2. Устранен rate limiting

- Для воркспейсов с 100+ проектами: сканирование пропускается, создается конфиг с одним примером
- Для < 100 проектов: ограничение параллелизма через `Semaphore(5)` + задержка 0.5 сек
- **Файл:** `aa/commands/init.py`

### 3. Добавлена поддержка `-v`/`-vv`

- Флаги работают в команде `init` для INFO и DEBUG режимов
- **Файл:** `aa/commands/init.py`

## Верификация

✅ Команда `aa init` успешно выполняется без ошибки 400
✅ Список проектов корректно загружается (100 проектов с фильтром `archived=false`)
✅ Для воркспейсов с 100+ проектами автоматически создается упрощенный конфиг
✅ Отсутствует rate limiting благодаря пропуску сканирования
✅ Флаги `-v` и `-vv` корректно работают

## Результаты

- Время выполнения `aa init`: **~3 секунды** (было: падение с ошибкой 400)
- Для воркспейсов с 100+ проектами: **~3 секунды** без rate limiting (было бы: ~10+ минут с блокировками)
- Пользователь может вручную добавить свои проекты в конфиг

## Файлы изменены

- `aa/core/asana_client.py` - добавлена пагинация и фильтрация в `get_projects()`
- `aa/commands/init.py` - добавлена логика для 100+ проектов и поддержка `-v`/`-vv`

## Документация

См. `AT-3-Findings.md` для технических деталей работы с Asana API.
